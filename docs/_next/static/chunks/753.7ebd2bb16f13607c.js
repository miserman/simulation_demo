"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[753],{14753:function(e,t,a){a.r(t),a.d(t,{default:function(){return E}});var r=a(57437),n=a(79768),o=a(47478),i=a(74150),s=a(28098),l=a(54272),c=a(2265),u=a(58545),h=a(78189),f=a(77331),m=a(75921),d=a(43417);function p(e){let{data:t}=e,a=(0,c.useRef)(null);return(0,c.useEffect)(()=>{let e=a.current?(0,o.S1)(a.current,"dark",{renderer:"svg"}):null,t=()=>e&&e.resize();return window.addEventListener("resize",t),()=>{e&&e.dispose(),window.removeEventListener("resize",t)}},[]),(0,c.useEffect)(()=>{if(a.current){let e=(0,o.JE)(a.current);e&&(t.length?e.setOption({backgroundColor:"#000",animationDuration:300,grid:{top:30,right:20,bottom:50},toolbox:{feature:{saveAsImage:{name:"batch_distributions"}}},tooltip:{trigger:"item",textStyle:{color:"#fff"},backgroundColor:"#000",borderWidth:0,valueFormatter:e=>e.toFixed(2)},xAxis:{type:"value",name:"Final Value (across runs)",nameLocation:"center",nameGap:30,min:e=>Math.floor(e.min)},yAxis:{type:"value",name:"Initial Value (across runs)",nameLocation:"center",nameRotate:90,nameGap:40,min:e=>Math.floor(e.min)},series:t},!1,!0):e.clear())}},[t]),(0,r.jsx)(l.Z,{ref:a,sx:{height:400,width:1200,maxWidth:"100%"}})}function y(e){let{variants:t,epochs:a,data:n}=e,i=(0,c.useRef)(null);return(0,c.useEffect)(()=>{let e=i.current?(0,o.S1)(i.current,"dark",{renderer:"svg"}):null,t=()=>e&&e.resize();return window.addEventListener("resize",t),()=>{e&&e.dispose(),window.removeEventListener("resize",t)}},[]),(0,c.useEffect)(()=>{if(i.current){let e=(0,o.JE)(i.current);e&&(n.length?e.setOption({backgroundColor:"#000",animationDuration:300,grid:{top:30,right:20,bottom:50},toolbox:{feature:{saveAsImage:{name:"batch_trends"}}},legend:{orient:"vertical",left:70,top:20,data:t,backgroundColor:"#000"},xAxis:{data:a,name:"Epoch",nameLocation:"center",nameGap:30},yAxis:{type:"value",name:"Mean Value (across runs, +/- SD)",nameLocation:"center",nameRotate:90,nameGap:40,min:e=>Math.floor(e.min)},series:n},!1,!0):e.clear())}},[n,a,t]),(0,r.jsx)(l.Z,{ref:i,sx:{height:400,width:1200,maxWidth:"100%"}})}function E(e){let{data:t,batches:a}=e,n=Object.keys(t),o={},i=-1/0;a.forEach(e=>{e.epochs>i&&(i=e.epochs),o[e.name]=e.color});let s=Array.from({length:i},(e,t)=>t+1),c=[],u=[];n.forEach(e=>{let a=t[e],r=a.length,n=a[0].means.length,i=Array(a[0].initialValues.length),s=Array(n).fill(0),l=Array(n).fill(0);a.forEach(e=>{e.initialValues.forEach((t,a)=>{i[a]||(i[a]=[0,0]),i[a][0]+=e.finalValues[a],i[a][1]+=t}),e.means.forEach((e,t)=>{s[t]+=e})}),s.forEach((e,t)=>{s[t]/=r}),i.forEach((e,t)=>{i[t][0]/=r,i[t][1]/=r}),a.forEach(e=>{e.means.forEach((e,t)=>{l[t]+=Math.pow(e-s[t],2)})}),l.forEach((e,t)=>{l[t]=Math.sqrt(l[t]/r)}),c.push(i),u.push({name:"lower-"+e,type:"line",data:l.map((e,t)=>s[t]-e),lineStyle:{opacity:0},stack:"band-"+e,symbol:"none"}),u.push({name:e,type:"line",data:s,showSymbol:!1,color:o[e]}),u.push({name:"upper-"+e,type:"line",data:l.map(e=>2*e),lineStyle:{opacity:0},areaStyle:{opacity:.2,color:o[e]},stack:"band-"+e,symbol:"none"})});let h=[];return n.forEach((e,t)=>{h.push({name:e,type:"scatter",data:c[t],color:o[e]})}),(0,r.jsxs)(l.Z,{children:[(0,r.jsx)(y,{variants:n,epochs:s,data:u}),(0,r.jsx)(p,{data:h})]})}(0,n.D)([i.N,u.N,h.N,f.N,m.N,d.N,s.N])}}]);