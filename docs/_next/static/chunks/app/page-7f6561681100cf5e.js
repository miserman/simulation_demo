(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[931],{51716:function(e,a,t){Promise.resolve().then(t.bind(t,70538))},70538:function(e,a,t){"use strict";t.r(a),t.d(a,{default:function(){return ea}});var n=t(57437),l=t(99136),i=t(7155),r=t(33269),s=t(2265),o=t(56167),c=t(54272),u=t(29835),h=t(10470),p=t(914),d=t(53224),m=t(18499),x=t(43206),b=t(80874),g=t(94589),v=t(79768),j=t(47478),f=t(99226),Z=t(78189),y=t(90046),k=t(70537);function w(e){let{data:a,links:t}=e,l=(0,s.useRef)(null);return(0,s.useEffect)(()=>{let e=l.current?(0,j.S1)(l.current,"dark",{renderer:"canvas"}):null,a=()=>e&&e.resize();return window.addEventListener("resize",a),()=>{e&&e.dispose(),window.removeEventListener("resize",a)}},[]),(0,s.useEffect)(()=>{if(l.current){let e=(0,j.JE)(l.current);if(e){if(a.length){let n=1/0,l=-1/0;a.forEach(e=>{e.value<n&&(n=e.value),e.value>l&&(l=e.value)}),e.setOption({visualMap:{min:n+2,max:l-2,right:10,top:10,text:["high","low"],calculable:!0,inRange:{color:["#7257ff","#f2c31a"]}},tooltip:{textStyle:{color:"#fff"},backgroundColor:"#000",borderWidth:0,valueFormatter:e=>e.toFixed(2)},backgroundColor:"#00000000",animation:!1,series:[{type:"graph",data:a,links:t,roam:!0,emphasis:{focus:"adjacency",itemStyle:{opacity:1},label:{opacity:1},lineStyle:{width:10,opacity:1}},blur:{itemStyle:{opacity:.3},lineStyle:{opacity:.3},label:{opacity:.3}}}]},!1,!0)}else e.clear()}}},[a,t]),(0,n.jsx)(c.Z,{ref:l,sx:{width:"100%",height:"100%",minHeight:"10px"}})}(0,v.D)([y.N,k.N,f.N,Z.N]);var C=t(74150),P=t(58545),E=t(77331);function z(e,a){let t=arguments.length>2&&void 0!==arguments[2]?arguments[2]:3,n=a.length;return e.map(e=>{let l=0;return a.forEach(a=>{l+=1/Math.sqrt(2*Math.PI)*Math.exp(-.5*Math.pow((e-a)/t,2))}),l/t/n})}var S=t(43417);(0,v.D)([C.N,P.N,E.N,S.N]);let M=[];function N(e){let{epoch:a,data:t}=e,l=(0,s.useRef)(null);return(0,s.useEffect)(()=>{let e=l.current?(0,j.S1)(l.current,"dark",{renderer:"svg"}):null,a=()=>e&&e.resize();return window.addEventListener("resize",a),()=>{e&&e.dispose(),window.removeEventListener("resize",a)}},[]),(0,s.useEffect)(()=>{if(l.current){let e=(0,j.JE)(l.current);if(e){if(t.length){let n=t.map(e=>e.value),l=function(e){let a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:3,t=1/0,n=-1/0;return(e.forEach(e=>{e<t&&(t=e),e>n&&(n=e)}),isFinite(t))?(t=Math.floor(t),Array.from({length:Math.max(1,Math.ceil(((n=Math.ceil(n))-t)/a))},(e,n)=>t+n*a)):[]}([...n,...M],.5);(1===a||0===M.length)&&(M=n),e.setOption({color:["#d9ccff","#ffd9a7"],backgroundColor:"#00000000",animationDuration:300,grid:{top:30,right:20,bottom:60,left:60},legend:{left:"right",data:["current","initial"]},xAxis:{type:"category",boundaryGap:!1,data:l,name:"Value",nameLocation:"center",nameGap:35},yAxis:{type:"value",name:"Density",nameLocation:"center",nameRotate:90,nameGap:40,min:0},series:[{name:"current",type:"line",areaStyle:{opacity:.4},data:z(l,n,2),symbol:"none"},{name:"initial",type:"line",data:z(l,M,2),symbol:"none"}]},!1,!0)}else e.clear()}}},[t,a]),(0,n.jsx)(c.Z,{ref:l,sx:{width:"100%",height:"100%",minHeight:"10px"}})}(0,v.D)([C.N,P.N,Z.N,S.N]);let F={epoch:[],mean:[]};function A(e){let{epoch:a,data:t}=e,l=(0,s.useRef)(null);return(0,s.useEffect)(()=>{let e=l.current?(0,j.S1)(l.current,"dark",{renderer:"svg"}):null,a=()=>e&&e.resize();return window.addEventListener("resize",a),()=>{e&&e.dispose(),window.removeEventListener("resize",a)}},[]),(0,s.useEffect)(()=>{if(l.current){let e=(0,j.JE)(l.current);if(e){if(t.length){1===a&&(F.epoch=[],F.mean=[]);let n=0;t.forEach(e=>n+=e.value),n/=t.length,F.epoch.push(a),F.mean.push(n),e.setOption({color:"#d9ccff",backgroundColor:"#00000000",animationDuration:300,grid:{top:30,right:30,bottom:60,left:60},tooltip:{trigger:"axis",textStyle:{color:"#fff"},backgroundColor:"#00000000",borderWidth:0,valueFormatter:e=>e.toFixed(2)},xAxis:{data:F.epoch,name:"Epoch",nameLocation:"center",nameGap:35},yAxis:{type:"value",name:"Mean Value",nameLocation:"center",nameRotate:90,nameGap:40,min:e=>Math.floor(e.min)},series:[{type:"line",data:F.mean,symbol:"none"}]},!1,!0)}else e.clear()}}},[t,a]),(0,n.jsx)(c.Z,{ref:l,sx:{width:"100%",height:"100%",minHeight:"10px"}})}var L=t(7291),R=t(78502),G=t(60490),D=t(86087),V=t(99528),W=t(85195),_=t(6285),B=t(60036),H=t(40512),O=t(67147),I=t(89969),T=t(66910);let q=(0,t(24232).default)(()=>Promise.all([t.e(755),t.e(753)]).then(t.bind(t,14753)),{loadableGenerated:{webpack:()=>[14753]}});function J(e,a){if("type"in a){if("clear"===a.type)return[];"remove"===a.type?e.splice(a.index,1):e[a.index]=a.batch}else{let t=e[a.index];if("component"in a)switch(a.component){case"agent":t.agentParams={...t.agentParams,[a.key]:a.value};break;case"value":t.valueParams={...t.valueParams,[a.key]:a.value};break;case"connection":t.connectionParams={...t.connectionParams,[a.key]:a.value}}else t[a.key]=a.value}return[...e]}function U(e){let{index:a,variant:t,update:l,onlyVariant:i}=e,{name:r,color:s,runs:c,epochs:h,n:d,agentParams:m,valueParams:b,connectionParams:g}=t,v=-1;return(0,n.jsxs)(W.Z,{variant:"outlined",sx:{p:1,m:.5},children:[(0,n.jsxs)(o.Z,{direction:"row",spacing:1,sx:{justifyContent:"space-between",mb:2,mt:1},children:[(0,n.jsxs)(o.Z,{direction:"row",spacing:1,children:[(0,n.jsx)(p.Z,{label:"name",size:"small",value:r,onChange:e=>{l({index:a,key:"name",value:e.target.value})}}),(0,n.jsx)(p.Z,{label:"color",type:"color",size:"small",value:s,onChange:e=>{cancelAnimationFrame(v);let t=e.target.value;v=requestAnimationFrame(()=>l({index:a,key:"color",value:t}))},sx:{width:"52px","& .MuiInputBase-input":{backgroundColor:s},"& input::-webkit-color-swatch":{border:"none"},"& input::-moz-color-swatch":{border:"none"}}}),(0,n.jsx)(p.Z,{sx:{width:"100px"},label:"runs",size:"small",type:"number",value:c,onChange:e=>{l({index:a,key:"runs",value:+e.target.value})}}),(0,n.jsx)(p.Z,{sx:{width:"100px"},label:"epochs",size:"small",type:"number",value:h,onChange:e=>{l({index:a,key:"epochs",value:+e.target.value})}})]}),(0,n.jsx)(x.Z,{onClick:()=>l({index:a,type:"remove"}),"aria-label":"remove variant",color:"error",disabled:i,children:(0,n.jsx)(V.Z,{})})]}),(0,n.jsxs)(o.Z,{direction:"row",spacing:1,children:[(0,n.jsxs)(o.Z,{spacing:1,children:[(0,n.jsx)(u.Z,{children:"Population"}),(0,n.jsx)(p.Z,{label:"n",size:"small",type:"number",value:d,onChange:e=>{l({index:a,key:"n",value:+e.target.value})}})]}),g?(0,n.jsxs)(o.Z,{spacing:1,children:[(0,n.jsx)(u.Z,{children:"Graphs"}),(0,n.jsx)(p.Z,{label:"k",size:"small",type:"number",value:g.k,onChange:e=>{l({index:a,key:"k",value:+e.target.value,component:"connection"})}}),(0,n.jsx)(p.Z,{label:"beta",size:"small",type:"number",value:g.beta,onChange:e=>{l({index:a,key:"beta",value:+e.target.value,component:"connection"})}})]}):(0,n.jsx)(n.Fragment,{}),b?(0,n.jsxs)(o.Z,{spacing:1,children:[(0,n.jsx)(u.Z,{children:"Values"}),(0,n.jsx)(p.Z,{label:"alpha",size:"small",type:"number",value:b.alpha,onChange:e=>{l({index:a,key:"alpha",value:+e.target.value,component:"value"})}}),(0,n.jsx)(p.Z,{label:"beta",size:"small",type:"number",value:b.beta,onChange:e=>{l({index:a,key:"beta",value:+e.target.value,component:"value"})}})]}):(0,n.jsx)(n.Fragment,{}),m?(0,n.jsxs)(o.Z,{spacing:1,children:[(0,n.jsx)(u.Z,{children:"Agents"}),(0,n.jsxs)(o.Z,{spacing:1,direction:"row",children:[(0,n.jsxs)(o.Z,{spacing:1,children:[(0,n.jsx)(p.Z,{label:"tolerance",size:"small",type:"number",value:m.tolerance,onChange:e=>{l({index:a,key:"tolerance",value:+e.target.value,component:"agent"})}}),(0,n.jsx)(p.Z,{label:"stability",size:"small",type:"number",value:m.stability,onChange:e=>{l({index:a,key:"stability",value:+e.target.value,component:"agent"})}})]}),(0,n.jsxs)(o.Z,{spacing:1,children:[(0,n.jsx)(p.Z,{label:"mobility",size:"small",type:"number",value:m.mobility,onChange:e=>{l({index:a,key:"mobility",value:+e.target.value,component:"agent"})}}),(0,n.jsx)(p.Z,{label:"error proportion",size:"small",type:"number",value:m.errorProp,onChange:e=>{l({index:a,key:"errorProp",value:+e.target.value,component:"agent"})}})]})]})]}):(0,n.jsx)(n.Fragment,{})]})]})}let K={};function X(){let[e,a]=(0,s.useState)(!1),l=()=>a(!e),[i,r]=(0,s.useState)(!1),[h,p]=(0,s.useState)(!1),[d,m]=(0,s.useState)(0),[b,g]=(0,s.useReducer)(J,[]),v=e=>{m(0),r(!0),p(!1),K={},e.forEach(a=>{let n=new Worker(t.tu(new URL(t.p+t.u(599),t.b)));n.onmessage=a=>{K[a.data.name]=a.data.runs;let t=!0,l=0;e.forEach(e=>{e.name in K?l++:t=!1}),m(l),t&&p(!0),n.terminate()},n.postMessage(a)})},j=()=>{g({type:"add",index:b.length,batch:{name:""+b.length,color:"#555555",runs:10,epochs:200,n:100,agentParams:{tolerance:0,stability:0,mobility:0,errorProp:0},valueParams:{base:15,alpha:3,beta:.25},connectionParams:{k:4,beta:.1}}})};b.length||j();let f=(0,s.useMemo)(()=>b.map((e,a)=>(0,n.jsx)(U,{index:a,variant:e,update:g,onlyVariant:1===b.length},a)),[b]);return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(_.Z,{variant:"contained",onClick:l,children:"Batch"}),e&&(0,n.jsxs)(B.Z,{open:e,onClose:l,children:[(0,n.jsx)(H.Z,{sx:{p:1},children:"Batch Runner"}),(0,n.jsx)(x.Z,{"aria-label":"close export menu",onClick:l,sx:{position:"absolute",right:5,top:5},className:"close-button",children:(0,n.jsx)(V.Z,{})}),i&&h?(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(O.Z,{sx:{p:0},children:(0,n.jsx)(q,{data:K,batches:b})}),(0,n.jsxs)(I.Z,{children:[(0,n.jsx)(_.Z,{variant:"outlined",onClick:()=>v(b),children:"Rerun"}),(0,n.jsx)(_.Z,{variant:"contained",onClick:()=>r(!1),children:"New Batch"})]})]}):(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(O.Z,{sx:{p:0},children:f}),(0,n.jsxs)(I.Z,{sx:{justifyContent:"space-between"},children:[(0,n.jsxs)(o.Z,{direction:"row",spacing:1,children:[(0,n.jsx)(_.Z,{variant:"outlined",onClick:j,children:"Add Variant"}),(0,n.jsx)(_.Z,{variant:"outlined",onClick:()=>g({type:"clear"}),children:"Reset"})]}),(0,n.jsxs)(o.Z,{direction:"row",spacing:1,children:[i&&(0,n.jsx)(u.Z,{sx:{lineHeight:2.3},children:d+" / "+b.length}),(0,n.jsxs)(c.Z,{sx:{position:"relative"},children:[(0,n.jsx)(_.Z,{variant:"contained",disabled:i,onClick:()=>v(b),children:"Run Batch"}),i&&(0,n.jsx)(T.Z,{size:24,sx:{position:"absolute",top:"50%",left:"50%",marginTop:"-12px",marginLeft:"-12px"}})]})]})]})]})]})]})}let Y={},Q={network:-1,menu:-1};function $(){let[e,a]=(0,s.useState)({epoch:0,converged:!1,data:[],links:[]}),[l,i]=(0,s.useState)(!0);(0,s.useEffect)(()=>(Y.live=new Worker(t.tu(new URL(t.p+t.u(857),t.b))),Y.live.onmessage=e=>{cancelAnimationFrame(Q.network),Q.network=requestAnimationFrame(()=>a(e.data))},()=>Y.live&&Y.live.terminate()),[]);let[r,v]=(0,s.useState)(100),[j,f]=(0,s.useState)({tolerance:0,stability:0,mobility:0,errorProp:0}),[Z,y]=(0,s.useState)({base:15,alpha:3,beta:.25}),[k,C]=(0,s.useState)({k:4,beta:.1});return(0,s.useEffect)(()=>{Y.live&&Y.live.postMessage({n:r,scale:{height:window.innerHeight,width:window.innerWidth},agentParams:j,valueParams:Z,connectionParams:k})},[r,j,Z,k]),Y.live?(0,n.jsxs)(n.Fragment,{children:[(0,n.jsxs)(o.Z,{sx:{position:"absolute",top:0,right:0,bottom:0,left:l?"200px":0,overflow:"hidden",transition:"left 300ms"},children:[(0,n.jsx)(c.Z,{sx:{height:"70%"},children:(0,n.jsx)(w,{data:e.data,links:e.links})}),(0,n.jsxs)(o.Z,{direction:"row",sx:{height:"30%"},children:[(0,n.jsx)(N,{epoch:e.epoch,data:e.data}),(0,n.jsx)(A,{epoch:e.epoch,data:e.data})]}),(0,n.jsxs)(u.Z,{variant:"h5",sx:{position:"absolute",textAlign:"center",width:"100%",top:10},children:["Epoch: ",e.epoch+(e.converged?", stagnant":"")]})]}),(0,n.jsxs)(o.Z,{spacing:1,sx:{position:"absolute",width:"200px",top:0,bottom:0,left:l?0:"-200px",mt:"40px",p:1,transition:"left 300ms",overflowX:"hidden",overflowY:"auto","& .MuiSlider-markLabel":{fontSize:".8em"}},children:[(0,n.jsx)(h.Z,{children:(0,n.jsx)(p.Z,{value:r,onChange:e=>v(+e.target.value||100),label:"Agents",size:"small",type:"number"})}),(0,n.jsxs)(h.Z,{children:[(0,n.jsx)(u.Z,{children:"Graph"}),(0,n.jsx)(d.Z,{title:"average number of connections per agent; mean degree",placement:"right",children:(0,n.jsxs)(c.Z,{sx:{pr:1.5,pl:1.5},children:[(0,n.jsxs)(u.Z,{variant:"caption",id:"connection-label-k",children:["K: ",k.k]}),(0,n.jsx)(m.ZP,{value:k.k,"aria-labelledby":"connection-label-k",step:1,min:1,max:20,marks:[{value:1,label:1},{value:20,label:20}],onChange:(e,a)=>{C({...k,k:"number"==typeof a?a:a[0]})}})]})}),(0,n.jsx)(d.Z,{title:"chance for a random connection; rewire probability",placement:"right",children:(0,n.jsxs)(c.Z,{sx:{pr:1.5,pl:1.5},children:[(0,n.jsxs)(u.Z,{variant:"caption",id:"connection-label-beta",children:["beta: ",k.beta]}),(0,n.jsx)(m.ZP,{value:k.beta,"aria-labelledby":"connection-label-beta",step:.1,min:0,max:1,marks:[{value:0,label:0},{value:1,label:1}],onChange:(e,a)=>{C({...k,beta:"number"==typeof a?a:a[0]})}})]})})]}),(0,n.jsxs)(h.Z,{children:[(0,n.jsx)(u.Z,{children:"Value Distribution"}),(0,n.jsx)(d.Z,{title:"alpha (shape) of each agent's Gamma distribution",placement:"right",children:(0,n.jsxs)(c.Z,{sx:{pr:1.5,pl:1.5},children:[(0,n.jsxs)(u.Z,{variant:"caption",id:"value-label-alpha",children:["alpha: ",Z.alpha]}),(0,n.jsx)(m.ZP,{value:Z.alpha,"aria-labelledby":"value-label-alpha",step:1,min:0,max:20,marks:[{value:0,label:0},{value:20,label:20}],onChange:(e,a)=>{y({...Z,alpha:"number"==typeof a?a:a[0]})}})]})}),(0,n.jsx)(d.Z,{title:"beta (rate) of each agent's Gamma distribution",placement:"right",children:(0,n.jsxs)(c.Z,{sx:{pr:1.5,pl:1.5},children:[(0,n.jsxs)(u.Z,{variant:"caption",id:"value-label-beta",children:["beta: ",Z.beta]}),(0,n.jsx)(m.ZP,{value:Z.beta,"aria-labelledby":"value-label-beta",step:.01,min:.01,max:1,marks:[{value:.01,label:".1"},{value:1,label:1}],onChange:(e,a)=>{y({...Z,beta:"number"==typeof a?a:a[0]})}})]})})]}),(0,n.jsxs)(h.Z,{children:[(0,n.jsx)(u.Z,{children:"Agent Properties"}),(0,n.jsx)(d.Z,{title:"range of the agent's value sensitivity; degree of satisficing",placement:"right",children:(0,n.jsxs)(c.Z,{sx:{pr:1.5,pl:1.5},children:[(0,n.jsxs)(u.Z,{variant:"caption",id:"agent-label-tol",children:["tolerance: ",j.tolerance]}),(0,n.jsx)(m.ZP,{value:j.tolerance,"aria-labelledby":"agent-label-tol",step:.1,min:0,max:2,marks:[{value:0,label:0},{value:2,label:2}],onChange:(e,a)=>{f({...j,tolerance:"number"==typeof a?a:a[0]})}})]})}),(0,n.jsx)(d.Z,{title:"agent's tendency to stay at the same value; 1 = unable to change",placement:"right",children:(0,n.jsxs)(c.Z,{sx:{pr:1.5,pl:1.5},children:[(0,n.jsxs)(u.Z,{variant:"caption",id:"agent-label-stab",children:["stability: ",j.stability]}),(0,n.jsx)(m.ZP,{value:j.stability,"aria-labelledby":"agent-label-stab",step:.1,min:0,max:1,marks:[{value:0,label:0},{value:1,label:1}],onChange:(e,a)=>{f({...j,stability:"number"==typeof a?a:a[0]})}})]})}),(0,n.jsx)(d.Z,{title:"agent's chance to replace their least similar connection with their most similar secondary connection",placement:"right",children:(0,n.jsxs)(c.Z,{sx:{pr:1.5,pl:1.5},children:[(0,n.jsxs)(u.Z,{variant:"caption",id:"agent-label-mob",children:["mobility: ",j.mobility]}),(0,n.jsx)(m.ZP,{value:j.mobility,"aria-labelledby":"agent-label-mob",step:.01,min:0,max:1,marks:[{value:0,label:0},{value:1,label:1}],onChange:(e,a)=>{f({...j,mobility:"number"==typeof a?a:a[0]})}})]})}),(0,n.jsx)(d.Z,{title:"proportion of error added to agent's value each step",placement:"right",children:(0,n.jsxs)(c.Z,{sx:{pr:1.5,pl:1.5},children:[(0,n.jsxs)(u.Z,{variant:"caption",id:"agent-label-errorProp",children:["error proportion: ",j.errorProp]}),(0,n.jsx)(m.ZP,{value:j.errorProp,"aria-labelledby":"agent-label-errorProp",step:.01,min:0,max:1,marks:[{value:0,label:0},{value:1,label:1}],onChange:(e,a)=>{f({...j,errorProp:"number"==typeof a?a:a[0]})}})]})})]}),(0,n.jsx)(X,{})]}),(0,n.jsxs)(o.Z,{sx:{width:l?"200px":"10px",justifyContent:"space-between",transition:"width 300ms"},direction:"row",children:[(0,n.jsx)(x.Z,{onClick:()=>{clearTimeout(Q.menu),i(!l),setTimeout(()=>clearTimeout(Q.menu),500),Q.menu=setInterval(()=>dispatchEvent(new Event("resize")),10)},sx:{width:40},"aria-label":"toggle menu",children:l?(0,n.jsx)(L.Z,{}):(0,n.jsx)(R.Z,{})}),(0,n.jsx)(x.Z,{"aria-label":"stop simulation",onClick:()=>Y.live&&Y.live.postMessage({restart:!0}),children:(0,n.jsx)(G.Z,{})}),(0,n.jsx)(x.Z,{"aria-label":"stop simulation",onClick:()=>Y.live&&Y.live.postMessage({stop:!0}),children:(0,n.jsx)(D.Z,{color:"error"})})]})]}):(0,n.jsx)(b.Z,{open:!Y.live,children:(0,n.jsxs)(o.Z,{direction:"column",sx:{textAlign:"center"},children:[(0,n.jsx)(u.Z,{variant:"h4",children:"Initializing Live Worker"}),(0,n.jsx)(g.Z,{})]})})}let ee=(0,l.Z)({palette:{mode:"dark",background:{default:"#000"},primary:{main:"#d9ccff"}}});function ea(){return(0,n.jsx)(s.StrictMode,{children:(0,n.jsxs)(i.Z,{theme:ee,children:[(0,n.jsx)(r.ZP,{}),(0,n.jsx)($,{})]})})}}},function(e){e.O(0,[411,971,69,744],function(){return e(e.s=51716)}),_N_E=e.O()}]);