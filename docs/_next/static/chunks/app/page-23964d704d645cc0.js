(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[931],{51716:function(e,a,t){Promise.resolve().then(t.bind(t,83325))},83325:function(e,a,t){"use strict";t.r(a),t.d(a,{default:function(){return $}});var n=t(57437),r=t(99136),l=t(7155),i=t(33269),s=t(2265),o=t(56167),c=t(54272),u=t(29835),h=t(10470),p=t(914),d=t(43206),m=t(53224),x=t(18499),b=t(79768),g=t(47478),f=t(99226),v=t(78189),j=t(90046),Z=t(70537);function y(e){let{data:a,links:t}=e,r=(0,s.useRef)(null);return(0,s.useEffect)(()=>{let e=r.current?(0,g.S1)(r.current,"dark",{renderer:"canvas"}):null,a=()=>e&&e.resize();return window.addEventListener("resize",a),()=>{e&&e.dispose(),window.removeEventListener("resize",a)}},[]),(0,s.useEffect)(()=>{if(r.current){let e=(0,g.JE)(r.current);if(e){if(a.length){let n=1/0,r=-1/0;a.forEach(e=>{e.value<n&&(n=e.value),e.value>r&&(r=e.value)}),e.setOption({visualMap:{min:n+2,max:r-2,right:10,top:10,text:["high","low"],calculable:!0,inRange:{color:["#7257ff","#f2c31a"]}},tooltip:{textStyle:{color:"#fff"},backgroundColor:"#000",borderWidth:0,valueFormatter:e=>e.toFixed(2)},backgroundColor:"#000",animationDuration:300,series:[{type:"graph",data:a,links:t,roam:!0,emphasis:{focus:"adjacency",itemStyle:{opacity:1},label:{opacity:1},lineStyle:{width:10,opacity:1}},blur:{itemStyle:{opacity:.3},lineStyle:{opacity:.3},label:{opacity:.3}}}]},!1,!0)}else e.clear()}}},[a,t]),(0,n.jsx)(c.Z,{ref:r,sx:{width:"100%",height:"100%",minHeight:"10px"}})}(0,b.D)([j.N,Z.N,f.N,v.N]);var w=t(74150),k=t(58545),E=t(77331);function C(e,a){let t=arguments.length>2&&void 0!==arguments[2]?arguments[2]:3,n=a.length;return e.map(e=>{let r=0;return a.forEach(a=>{r+=1/Math.sqrt(2*Math.PI)*Math.exp(-.5*Math.pow((e-a)/t,2))}),r/t/n})}var S=t(43417);(0,b.D)([w.N,k.N,E.N,S.N]);let z=[];function P(e){let{epoch:a,data:t}=e,r=(0,s.useRef)(null);return(0,s.useEffect)(()=>{let e=r.current?(0,g.S1)(r.current,"dark",{renderer:"svg"}):null,a=()=>e&&e.resize();return window.addEventListener("resize",a),()=>{e&&e.dispose(),window.removeEventListener("resize",a)}},[]),(0,s.useEffect)(()=>{if(r.current){let e=(0,g.JE)(r.current);if(e){if(t.length){let n=t.map(e=>e.value),r=function(e){let a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:3,t=1/0,n=-1/0;return(e.forEach(e=>{e<t&&(t=e),e>n&&(n=e)}),isFinite(t))?(t=Math.floor(t),Array.from({length:Math.max(1,Math.ceil(((n=Math.ceil(n))-t)/a))},(e,n)=>t+n*a)):[]}([...n,...z]);(1===a||0===z.length)&&(z=n),e.setOption({backgroundColor:"#000",animationDuration:300,grid:{top:30,right:30,bottom:60},legend:{left:"right",data:["current","initial"]},xAxis:{type:"category",boundaryGap:!1,data:r,name:"Value",nameLocation:"center",nameGap:35},yAxis:{type:"value",name:"Density",nameLocation:"center",nameRotate:90,nameGap:40,min:0},series:[{name:"current",type:"line",areaStyle:{opacity:.4},data:C(r,n),symbol:"none"},{name:"initial",type:"line",data:C(r,z),symbol:"none"}]},!1,!0)}else e.clear()}}},[t,a]),(0,n.jsx)(c.Z,{ref:r,sx:{width:"100%",height:"100%",minHeight:"10px"}})}(0,b.D)([w.N,k.N,v.N,S.N]);let A={epoch:[],mean:[]};function M(e){let{epoch:a,data:t}=e,r=(0,s.useRef)(null);return(0,s.useEffect)(()=>{let e=r.current?(0,g.S1)(r.current,"dark",{renderer:"svg"}):null,a=()=>e&&e.resize();return window.addEventListener("resize",a),()=>{e&&e.dispose(),window.removeEventListener("resize",a)}},[]),(0,s.useEffect)(()=>{if(r.current){let e=(0,g.JE)(r.current);if(e){if(t.length){1===a&&(A.epoch=[],A.mean=[]);let n=0;t.forEach(e=>n+=e.value),n/=t.length,A.epoch.push(a),A.mean.push(n),e.setOption({backgroundColor:"#000",animationDuration:300,grid:{top:30,right:30,bottom:60},tooltip:{trigger:"axis",textStyle:{color:"#fff"},backgroundColor:"#000",borderWidth:0,valueFormatter:e=>e.toFixed(2)},xAxis:{data:A.epoch,name:"Epoch",nameLocation:"center",nameGap:35},yAxis:{type:"value",name:"Mean Value",nameLocation:"center",nameRotate:90,nameGap:40,min:e=>Math.floor(e.min)},series:[{type:"line",data:A.mean,symbol:"none"}]},!1,!0)}else e.clear()}}},[t,a]),(0,n.jsx)(c.Z,{ref:r,sx:{width:"100%",height:"100%",minHeight:"10px"}})}var N=t(60490),L=t(86087),F=t(99528),R=t(6285),G=t(60036),D=t(40512),V=t(67147),W=t(89969),O=t(85195),_=t(66910),H=t(28098),I=t(75921);function J(e){let{data:a}=e,t=(0,s.useRef)(null);return(0,s.useEffect)(()=>{let e=t.current?(0,g.S1)(t.current,"dark",{renderer:"svg"}):null,a=()=>e&&e.resize();return window.addEventListener("resize",a),()=>{e&&e.dispose(),window.removeEventListener("resize",a)}},[]),(0,s.useEffect)(()=>{if(t.current){let e=(0,g.JE)(t.current);e&&(a.length?e.setOption({backgroundColor:"#000",animationDuration:300,grid:{top:30,right:20,bottom:50},toolbox:{feature:{saveAsImage:{name:"batch_distributions"}}},tooltip:{trigger:"item",textStyle:{color:"#fff"},backgroundColor:"#000",borderWidth:0,valueFormatter:e=>e.toFixed(2)},xAxis:{type:"value",name:"Final Value (across runs)",nameLocation:"center",nameGap:30,min:e=>Math.floor(e.min)},yAxis:{type:"value",name:"Initial Value (across runs)",nameLocation:"center",nameRotate:90,nameGap:40,min:e=>Math.floor(e.min)},series:a},!1,!0):e.clear())}},[a]),(0,n.jsx)(c.Z,{ref:t,sx:{pl:1,pr:1,pb:.5,height:400,width:1200,maxWidth:"100%"}})}function q(e){let{variants:a,epochs:t,data:r}=e,l=(0,s.useRef)(null);return(0,s.useEffect)(()=>{let e=l.current?(0,g.S1)(l.current,"dark",{renderer:"svg"}):null,a=()=>e&&e.resize();return window.addEventListener("resize",a),()=>{e&&e.dispose(),window.removeEventListener("resize",a)}},[]),(0,s.useEffect)(()=>{if(l.current){let e=(0,g.JE)(l.current);e&&(r.length?e.setOption({backgroundColor:"#000",animationDuration:300,grid:{top:30,right:20,bottom:50},toolbox:{feature:{saveAsImage:{name:"batch_trends"}}},legend:{orient:"vertical",left:70,top:20,data:a,backgroundColor:"#000"},xAxis:{data:t,name:"Epoch",nameLocation:"center",nameGap:30},yAxis:{type:"value",name:"Mean Value (across runs, +/- SD)",nameLocation:"center",nameRotate:90,nameGap:40,min:e=>Math.floor(e.min)},series:r},!1,!0):e.clear())}},[r,t,a]),(0,n.jsx)(c.Z,{ref:l,sx:{p:1,height:400,width:1200,maxWidth:"100%"}})}function B(e){let{data:a,batches:t}=e,r=Object.keys(a),l={},i=-1/0;t.forEach(e=>{e.epochs>i&&(i=e.epochs),l[e.name]=e.color});let s=Array.from({length:i},(e,a)=>a+1),o=[],u=[];r.forEach(e=>{let t=a[e],n=t.length,r=t[0].means.length,i=Array(t[0].initialValues.length),s=Array(r).fill(0),c=Array(r).fill(0);t.forEach(e=>{e.initialValues.forEach((a,t)=>{i[t]||(i[t]=[0,0]),i[t][0]+=e.finalValues[t],i[t][1]+=a}),e.means.forEach((e,a)=>{s[a]+=e})}),s.forEach((e,a)=>{s[a]/=n}),i.forEach((e,a)=>{i[a][0]/=n,i[a][1]/=n}),t.forEach(e=>{e.means.forEach((e,a)=>{c[a]+=Math.pow(e-s[a],2)})}),c.forEach((e,a)=>{c[a]=Math.sqrt(c[a]/n)}),o.push(i),u.push({name:"lower-"+e,type:"line",data:c.map((e,a)=>s[a]-e),lineStyle:{opacity:0},stack:"band-"+e,symbol:"none"}),u.push({name:e,type:"line",data:s,showSymbol:!1,color:l[e]}),u.push({name:"upper-"+e,type:"line",data:c.map(e=>2*e),lineStyle:{opacity:0},areaStyle:{opacity:.2,color:l[e]},stack:"band-"+e,symbol:"none"})});let h=[];return r.forEach((e,a)=>{h.push({name:e,type:"scatter",data:o[a],color:l[e]})}),(0,n.jsxs)(c.Z,{children:[(0,n.jsx)(q,{variants:r,epochs:s,data:u}),(0,n.jsx)(J,{data:h})]})}(0,b.D)([w.N,k.N,v.N,E.N,I.N,S.N,H.N]);let U={};function K(){let[e,a]=(0,s.useState)(!1),r=()=>a(!e),[l,i]=(0,s.useState)(!1),[h,m]=(0,s.useState)(!1),[x,b]=(0,s.useState)(0),[g,f]=(0,s.useState)([]),v=e=>{b(0),i(!0),m(!1),U={},e.forEach(a=>{let n=new Worker(t.tu(new URL(t.p+t.u(599),t.b)));n.onmessage=a=>{U[a.data.name]=a.data.runs;let t=!0,r=0;e.forEach(e=>{e.name in U?r++:t=!1}),b(r),t&&m(!0),n.terminate()},n.postMessage(a)})},j=()=>{f([...g,{name:""+g.length,color:"#555555",runs:10,epochs:200,n:100,agentParams:{tolerance:0,errorProp:0},valueParams:{base:15,alpha:3,beta:.25},connectionParams:{k:4,beta:.1}}])};return g.length||j(),(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(R.Z,{variant:"contained",onClick:r,children:"Batch"}),e&&(0,n.jsxs)(G.Z,{open:e,onClose:r,children:[(0,n.jsx)(D.Z,{children:"Batch Runner"}),(0,n.jsx)(d.Z,{"aria-label":"close export menu",onClick:r,sx:{position:"absolute",right:8,top:12},className:"close-button",children:(0,n.jsx)(F.Z,{})}),l&&h?(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(V.Z,{sx:{p:0},children:(0,n.jsx)(B,{data:U,batches:g})}),(0,n.jsx)(W.Z,{children:(0,n.jsx)(R.Z,{variant:"contained",onClick:()=>i(!1),children:"New Run"})})]}):(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(V.Z,{sx:{p:0},children:g.map((e,a)=>{let{name:t,color:r,runs:l,epochs:i,n:s,agentParams:c,valueParams:h,connectionParams:d}=e,m=()=>{cancelAnimationFrame(-1),requestAnimationFrame(()=>{g[a]={name:e.name,color:e.color,runs:e.runs,epochs:e.epochs,n:e.n,agentParams:{...e.agentParams},valueParams:{...e.valueParams},connectionParams:{...e.connectionParams}},f([...g])})};return(0,n.jsxs)(O.Z,{variant:"outlined",sx:{p:1,m:.5},children:[(0,n.jsxs)(o.Z,{direction:"row",spacing:1,sx:{justifyContent:"space-between",mb:2,mt:1},children:[(0,n.jsxs)(o.Z,{direction:"row",spacing:1,children:[(0,n.jsx)(p.Z,{label:"name",size:"small",value:t,onChange:a=>{e.name=a.target.value,m()}}),(0,n.jsx)(p.Z,{label:"color",type:"color",size:"small",value:r,onChange:a=>{e.color=a.target.value,m()},sx:{width:"52px","& .MuiInputBase-input":{backgroundColor:r},"& input::-webkit-color-swatch":{border:"none"},"& input::-moz-color-swatch":{border:"none"}}}),(0,n.jsx)(p.Z,{sx:{width:"100px"},label:"runs",size:"small",type:"number",value:l,onChange:a=>{e.runs=+a.target.value,m()}}),(0,n.jsx)(p.Z,{sx:{width:"100px"},label:"epochs",size:"small",type:"number",value:i,onChange:a=>{e.epochs=+a.target.value,m()}})]}),(0,n.jsx)(R.Z,{onClick:()=>{g.splice(a,1),f([...g])},color:"error",disabled:1===g.length,children:"Remove"})]}),(0,n.jsxs)(o.Z,{direction:"row",spacing:1,children:[(0,n.jsxs)(o.Z,{spacing:1,children:[(0,n.jsx)(u.Z,{children:"Population"}),(0,n.jsx)(p.Z,{label:"n",size:"small",type:"number",value:s,onChange:a=>{e.n=+a.target.value,m()}})]}),d?(0,n.jsxs)(o.Z,{spacing:1,children:[(0,n.jsx)(u.Z,{children:"Graphs"}),(0,n.jsx)(p.Z,{label:"k",size:"small",type:"number",value:d.k,onChange:e=>{d.k=+e.target.value,m()}}),(0,n.jsx)(p.Z,{label:"beta",size:"small",type:"number",value:d.beta,onChange:e=>{d.beta=+e.target.value,m()}})]}):(0,n.jsx)(n.Fragment,{}),h?(0,n.jsxs)(o.Z,{spacing:1,children:[(0,n.jsx)(u.Z,{children:"Values"}),(0,n.jsx)(p.Z,{label:"alpha",size:"small",type:"number",value:h.alpha,onChange:e=>{h.alpha=+e.target.value,m()}}),(0,n.jsx)(p.Z,{label:"beta",size:"small",type:"number",value:h.beta,onChange:e=>{h.beta=+e.target.value,m()}})]}):(0,n.jsx)(n.Fragment,{}),c?(0,n.jsxs)(o.Z,{spacing:1,children:[(0,n.jsx)(u.Z,{children:"Agents"}),(0,n.jsx)(p.Z,{label:"tolerance",size:"small",type:"number",value:c.tolerance,onChange:e=>{c.tolerance=+e.target.value,m()}}),(0,n.jsx)(p.Z,{label:"error proportion",size:"small",type:"number",value:c.errorProp,onChange:e=>{c.errorProp=+e.target.value,m()}})]}):(0,n.jsx)(n.Fragment,{})]})]},a)})}),(0,n.jsxs)(W.Z,{sx:{justifyContent:"space-between"},children:[(0,n.jsxs)(o.Z,{direction:"row",spacing:1,children:[(0,n.jsx)(R.Z,{variant:"outlined",onClick:j,children:"Add Variant"}),(0,n.jsx)(R.Z,{variant:"outlined",onClick:()=>f([]),children:"Reset"})]}),(0,n.jsxs)(o.Z,{direction:"row",spacing:1,children:[l&&(0,n.jsx)(u.Z,{sx:{lineHeight:2.3},children:x+" / "+g.length}),(0,n.jsxs)(c.Z,{sx:{position:"relative"},children:[(0,n.jsx)(R.Z,{variant:"contained",disabled:l,onClick:()=>v(g),children:"Run Batch"}),l&&(0,n.jsx)(_.Z,{size:24,sx:{position:"absolute",top:"50%",left:"50%",marginTop:"-12px",marginLeft:"-12px"}})]})]})]})]})]})]})}let T={},Q=-1;function X(){let[e,a]=(0,s.useState)({epoch:0,converged:!1,data:[],links:[]});(0,s.useEffect)(()=>(T.live=new Worker(t.tu(new URL(t.p+t.u(857),t.b))),T.live.onmessage=e=>{cancelAnimationFrame(Q),Q=requestAnimationFrame(()=>a(e.data))},()=>T.live&&T.live.terminate()),[]);let[r,l]=(0,s.useState)(100),[i,b]=(0,s.useState)({tolerance:0,errorProp:0}),[g,f]=(0,s.useState)({base:15,alpha:3,beta:.25}),[v,j]=(0,s.useState)({k:4,beta:.1});return(0,s.useEffect)(()=>{T.live&&T.live.postMessage({n:r,scale:{height:window.innerHeight,width:window.innerWidth},agentParams:i,valueParams:g,connectionParams:v})},[r,i,g,v]),(0,n.jsxs)(n.Fragment,{children:[(0,n.jsxs)(o.Z,{sx:{position:"absolute",top:0,right:0,bottom:0,left:0,overflow:"hidden"},children:[(0,n.jsx)(c.Z,{sx:{height:"65%"},children:(0,n.jsx)(y,{data:e.data,links:e.links})}),(0,n.jsxs)(o.Z,{direction:"row",sx:{height:"35%"},children:[(0,n.jsx)(P,{epoch:e.epoch,data:e.data}),(0,n.jsx)(M,{epoch:e.epoch,data:e.data})]})]}),(0,n.jsxs)(u.Z,{variant:"h5",sx:{position:"absolute",textAlign:"center",width:"100%",top:10},children:["Epoch: ",e.epoch+(e.converged?", stagnant":"")]}),(0,n.jsxs)(o.Z,{spacing:1,sx:{position:"fixed",maxWidth:"200px",p:.5,m:1,"& .MuiSlider-markLabel":{fontSize:".8em"}},children:[(0,n.jsx)(h.Z,{children:(0,n.jsxs)(o.Z,{direction:"row",children:[(0,n.jsx)(p.Z,{value:r,onChange:e=>l(+e.target.value||100),label:"Agents",size:"small",type:"number"}),(0,n.jsx)(d.Z,{"aria-label":"stop simulation",onClick:()=>T.live&&T.live.postMessage({restart:!0}),children:(0,n.jsx)(N.Z,{})}),(0,n.jsx)(d.Z,{"aria-label":"stop simulation",onClick:()=>T.live&&T.live.postMessage({stop:!0}),children:(0,n.jsx)(L.Z,{color:"error"})})]})}),(0,n.jsxs)(h.Z,{children:[(0,n.jsx)(u.Z,{children:"Graph"}),(0,n.jsx)(m.Z,{title:"average number of connections per agent; mean degree",placement:"right",children:(0,n.jsxs)(c.Z,{sx:{pr:1.5,pl:1.5},children:[(0,n.jsxs)(u.Z,{variant:"caption",id:"connection-label-k",children:["K: ",v.k]}),(0,n.jsx)(x.ZP,{value:v.k,"aria-labelledby":"connection-label-k",step:1,min:1,max:20,marks:[{value:1,label:1},{value:20,label:20}],onChange:(e,a)=>{j({...v,k:"number"==typeof a?a:a[0]})}})]})}),(0,n.jsx)(m.Z,{title:"chance for a random connection; rewire probability",placement:"right",children:(0,n.jsxs)(c.Z,{sx:{pr:1.5,pl:1.5},children:[(0,n.jsxs)(u.Z,{variant:"caption",id:"connection-label-beta",children:["beta: ",v.beta]}),(0,n.jsx)(x.ZP,{value:v.beta,"aria-labelledby":"connection-label-beta",step:.1,min:0,max:1,marks:[{value:0,label:0},{value:1,label:1}],onChange:(e,a)=>{j({...v,beta:"number"==typeof a?a:a[0]})}})]})})]}),(0,n.jsxs)(h.Z,{children:[(0,n.jsx)(u.Z,{children:"Value Distribution"}),(0,n.jsx)(m.Z,{title:"alpha (shape) of each agent's Gamma distribution",placement:"right",children:(0,n.jsxs)(c.Z,{sx:{pr:1.5,pl:1.5},children:[(0,n.jsxs)(u.Z,{variant:"caption",id:"value-label-alpha",children:["alpha: ",g.alpha]}),(0,n.jsx)(x.ZP,{value:g.alpha,"aria-labelledby":"value-label-alpha",step:1,min:0,max:20,marks:[{value:0,label:0},{value:20,label:20}],onChange:(e,a)=>{f({...g,alpha:"number"==typeof a?a:a[0]})}})]})}),(0,n.jsx)(m.Z,{title:"beta (rate) of each agent's Gamma distribution",placement:"right",children:(0,n.jsxs)(c.Z,{sx:{pr:1.5,pl:1.5},children:[(0,n.jsxs)(u.Z,{variant:"caption",id:"value-label-beta",children:["beta: ",g.beta]}),(0,n.jsx)(x.ZP,{value:g.beta,"aria-labelledby":"value-label-beta",step:.01,min:.01,max:1,marks:[{value:0,label:0},{value:1,label:1}],onChange:(e,a)=>{f({...g,beta:"number"==typeof a?a:a[0]})}})]})})]}),(0,n.jsxs)(h.Z,{children:[(0,n.jsx)(u.Z,{children:"Agent Properties"}),(0,n.jsx)(m.Z,{title:"range of the agent's value sensitivity; degree of satisficing",placement:"right",children:(0,n.jsxs)(c.Z,{sx:{pr:1.5,pl:1.5},children:[(0,n.jsxs)(u.Z,{variant:"caption",id:"agent-label-tol",children:["tolerance: ",i.tolerance]}),(0,n.jsx)(x.ZP,{value:i.tolerance,"aria-labelledby":"agent-label-tol",step:.1,min:0,max:2,marks:[{value:0,label:0},{value:2,label:2}],onChange:(e,a)=>{b({...i,tolerance:"number"==typeof a?a:a[0]})}})]})}),(0,n.jsx)(m.Z,{title:"proportion of error added to agent's value each step",placement:"right",children:(0,n.jsxs)(c.Z,{sx:{pr:1.5,pl:1.5},children:[(0,n.jsxs)(u.Z,{variant:"caption",id:"agent-label-errorProp",children:["error proportion: ",i.errorProp]}),(0,n.jsx)(x.ZP,{value:i.errorProp,"aria-labelledby":"agent-label-errorProp",step:.01,min:0,max:1,marks:[{value:0,label:0},{value:1,label:1}],onChange:(e,a)=>{b({...i,errorProp:"number"==typeof a?a:a[0]})}})]})})]}),(0,n.jsx)(K,{})]})]})}let Y=(0,r.Z)({palette:{mode:"dark",primary:{main:"#b393d3"},success:{main:"#4986cb"},error:{main:"#e0561c"}}});function $(){return(0,n.jsx)(s.StrictMode,{children:(0,n.jsxs)(l.Z,{theme:Y,children:[(0,n.jsx)(i.ZP,{}),(0,n.jsx)(X,{})]})})}}},function(e){e.O(0,[76,971,69,744],function(){return e(e.s=51716)}),_N_E=e.O()}]);